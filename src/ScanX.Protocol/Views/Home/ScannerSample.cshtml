
@{
    ViewData["Title"] = "ScannerSample";
}

<h2>ScannerSample</h2>

<div class="container content">

    <div class="row">
        <div class="col-9">
            <button type="button" class="btn btn-primary" onclick="scanImage();">
                Test
            </button>
            <br/>
            <div style="background-color:whitesmoke; min-height:400px;">

            </div>

        </div>
        <div class="col-3">
            <div style=" background-color:whitesmoke;min-height:400px">
                <div id="main-images">

                </div>
                <img id="main" class="img-fluid" />
            </div>
        </div>
    </div>
    
</div>


@section scripts{
    
    <script src="~/js/signalr.min.js"></script>

    <script src="~/js/scanx.js"></script>

    <script type="text/javascript">

        var scan = new ScanX();

        $(function () {

            scan.connection.on("ImageScanned", (data) => {

                var img = '<img class="img-fluid" src="data: image/png;base64,' + data + '"></img>';

                $("#main-images").append(img);
                

            });

            scan.connect();

        })

        function scanImage() {
            scan.scanMultiple();
        }

    </script>
}